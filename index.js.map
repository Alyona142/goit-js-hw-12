{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet currentPage = 1;\n\nexport function renderGallery(images, gallery) {\n  gallery.innerHTML = createGalleryMarkup(images);\n  lightbox.refresh();\n}\nfunction createGalleryMarkup(images) {\n  if (!images || !Array.isArray(images)) {\n    console.error(\"Invalid data format:\", images);\n    return '';\n  }\n\n  return images\n    .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <li class=\"gallery-item hvr-grow\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\">\n          <figure class=\"gallery-figure\">\n            <ul class=\"img-content-wrapper\">\n              <li>Likes<span>${likes}</span></li>\n              <li>Views<span>${views}</span></li>\n              <li>Comments<span>${comments}</span></li>\n              <li>Downloads<span>${downloads}</span></li>\n            </ul>\n          </figure>\n        </a>\n      </li>\n    `)\n    .join('');\n}\n\n\nexport function toggleLoader(isVisible) {\n  const loaderContainer = document.querySelector('.loader-container');\n  loaderContainer.style.display = isVisible ? 'flex' : 'none';\n}\n\nexport function resetPage() {\n  currentPage = 1; \n}","import axios from 'axios';\nimport { renderGallery } from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'izitoast/dist/css/iziToast.css';\n\nconst API_KEY = '46806668-35f52dba5a140225900df36e0';\nconst API_URL = 'https://pixabay.com/api/';\n\nconst searchForm = document.querySelector('.search-form');\nconst searchInput = searchForm.querySelector('input[name=\"search\"]');\nconst gallery = document.querySelector('.gallery');\nconst loaderContainer = document.querySelector('.loader-container');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst lightbox = new SimpleLightbox('.gallery a');\n\nlet currentPage = 1;\nlet queryString = '';\nlet totalHits = 0;\n\n\nfunction showLoader() {\n  const loaderContainer = document.querySelector('.loader-container');\n  if (loaderContainer) {\n    loaderContainer.style.display = 'flex';\n  } else {\n    console.error(\"Element '.loader-container' not found.\");\n  }\n}\n\nfunction resetGallery() {\n  gallery.innerHTML = '';\n  currentPage = 1; \n  loadMoreBtn.style.display = 'none'; \n}\n\nasync function loadImages(query, page) {\n  try {\n    showLoader();\n    const response = await axios.get(API_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        page: page,\n        per_page: 15, \n      },\n    });\n\n    const images = response.data.hits; \n    totalHits = response.data.totalHits; \n\n    if (Array.isArray(images) && images.length > 0) {\n      renderGallery(images, gallery);\n      showHideBtn(totalHits);\n    } else {\n      iziToast.info({ title: 'Info', message: 'No images found for your search query.' });\n      resetGallery();\n    }\n  } catch (error) {\n    console.error('Error loading images:', error);\n    iziToast.error({ title: 'Error', message: 'Failed to load images.' });\n    resetGallery();\n  } finally {\n    showLoader();\n  }\n}\n\nsearchForm.addEventListener('submit', (event) => {\n  event.preventDefault();\n\n  const query = searchInput.value.trim();\n  if (query.length === 0) {\n    return;\n  }\n\n  queryString = query;\n  resetGallery();\n  loadImages(queryString, currentPage);\n});\n\nloadMoreBtn.addEventListener('click', () => {\n  currentPage += 1;\n  loadImages(queryString, currentPage);\n});\n\nfunction showHideBtn(totalImages) {\n  if (totalImages <= currentPage * 15) { \n    loadMoreBtn.style.display = 'none';\n    iziToast.info({ title: 'Info', message: 'No more images to load.' });\n  } else {\n    loadMoreBtn.style.display = 'block';\n  }\n}\n\n"],"names":["lightbox","SimpleLightbox","renderGallery","images","gallery","createGalleryMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","API_KEY","API_URL","searchForm","searchInput","loadMoreBtn","currentPage","queryString","totalHits","showLoader","loaderContainer","resetGallery","loadImages","query","page","response","axios","showHideBtn","error","event","totalImages"],"mappings":"6vBAGA,MAAMA,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAIM,SAASC,EAAcC,EAAQC,EAAS,CAC7CA,EAAQ,UAAYC,EAAoBF,CAAM,EAC9CH,EAAS,QAAS,CACpB,CACA,SAASK,EAAoBF,EAAQ,CACnC,MAAI,CAACA,GAAU,CAAC,MAAM,QAAQA,CAAM,GAClC,QAAQ,MAAM,uBAAwBA,CAAM,EACrC,IAGFA,EACJ,IAAI,CAAC,CAAE,aAAAG,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,KAAgB;AAAA;AAAA,wCAE/CL,CAAa;AAAA,4CACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,+BAGvCC,CAAK;AAAA,+BACLC,CAAK;AAAA,kCACFC,CAAQ;AAAA,mCACPC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,KAKvC,EACA,KAAK,EAAE,CACZ,CC/BA,MAAMC,EAAU,qCACVC,EAAU,2BAEVC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAcD,EAAW,cAAc,sBAAsB,EAC7DX,EAAU,SAAS,cAAc,UAAU,EACzB,SAAS,cAAc,mBAAmB,EAClE,MAAMa,EAAc,SAAS,cAAc,gBAAgB,EAC1C,IAAIhB,EAAe,YAAY,EAEhD,IAAIiB,EAAc,EACdC,EAAc,GACdC,EAAY,EAGhB,SAASC,GAAa,CACpB,MAAMC,EAAkB,SAAS,cAAc,mBAAmB,EAC9DA,EACFA,EAAgB,MAAM,QAAU,OAEhC,QAAQ,MAAM,wCAAwC,CAE1D,CAEA,SAASC,GAAe,CACtBnB,EAAQ,UAAY,GACpBc,EAAc,EACdD,EAAY,MAAM,QAAU,MAC9B,CAEA,eAAeO,EAAWC,EAAOC,EAAM,CACrC,GAAI,CACFL,EAAY,EACZ,MAAMM,EAAW,MAAMC,EAAM,IAAId,EAAS,CACxC,OAAQ,CACN,IAAKD,EACL,EAAGY,EACH,KAAMC,EACN,SAAU,EACX,CACP,CAAK,EAEKvB,EAASwB,EAAS,KAAK,KAC7BP,EAAYO,EAAS,KAAK,UAEtB,MAAM,QAAQxB,CAAM,GAAKA,EAAO,OAAS,GAC3CD,EAAcC,EAAQC,CAAO,EAC7ByB,EAAYT,CAAS,IAErB,SAAS,KAAK,CAAE,MAAO,OAAQ,QAAS,yCAA0C,EAClFG,EAAc,EAEjB,OAAQO,EAAO,CACd,QAAQ,MAAM,wBAAyBA,CAAK,EAC5C,SAAS,MAAM,CAAE,MAAO,QAAS,QAAS,yBAA0B,EACpEP,EAAc,CAClB,QAAY,CACRF,EAAY,CAChB,CACA,CAEAN,EAAW,iBAAiB,SAAWgB,GAAU,CAC/CA,EAAM,eAAgB,EAEtB,MAAMN,EAAQT,EAAY,MAAM,KAAM,EAClCS,EAAM,SAAW,IAIrBN,EAAcM,EACdF,EAAc,EACdC,EAAWL,EAAaD,CAAW,EACrC,CAAC,EAEDD,EAAY,iBAAiB,QAAS,IAAM,CAC1CC,GAAe,EACfM,EAAWL,EAAaD,CAAW,CACrC,CAAC,EAED,SAASW,EAAYG,EAAa,CAC5BA,GAAed,EAAc,IAC/BD,EAAY,MAAM,QAAU,OAC5B,SAAS,KAAK,CAAE,MAAO,OAAQ,QAAS,0BAA2B,GAEnEA,EAAY,MAAM,QAAU,OAEhC"}